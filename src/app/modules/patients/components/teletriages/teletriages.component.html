<h2 mat-dialog-title>Información de teletriajes</h2>
<mat-dialog-content class="mat-typography">
  <mat-horizontal-stepper [linear]="isLinear" #stepper>
    <mat-step label="Teletriajes">
      <mat-form-field>
        <mat-label>Buscar por N°, fecha, estado o recomendación</mat-label>
        <input
          matInput
          (keyup)="applyFilter($event)"
          placeholder="Ej. Maricarmen"
          autocomplete="off"
          #input
        />
      </mat-form-field>
      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" matSort>
          <!-- Numero Column -->
          <ng-container matColumnDef="numero">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>N°</th>
            <td mat-cell *matCellDef="let element">{{ element.numero }}</td>
          </ng-container>
          <!-- Nombres Column -->
          <ng-container matColumnDef="created_at">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
            <td mat-cell *matCellDef="let element">{{ element.created_at }}</td>
          </ng-container>
          <!-- Apellidos Column -->
          <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
            <td mat-cell *matCellDef="let element">{{ element.estado }}</td>
          </ng-container>
          <!-- Apellidos Column -->
          <ng-container matColumnDef="indicadores">
            <th mat-header-cell *matHeaderCellDef>Indicadores de estado</th>
            <td mat-cell *matCellDef="let element">
              <div class="d-flex text-center">
                <div class="mr-1">
                  <div class="verde"></div>
                  {{ element.verde }}
                </div>
                <div class="mr-1">
                  <div class="amarillo"></div>
                  {{ element.amarillo }}
                </div>
                <div class="mr-1">
                  <div class="naranja"></div>
                  {{ element.naranja }}
                </div>
                <div class="mr-1">
                  <div class="rojo"></div>
                  {{ element.rojo }}
                </div>
              </div>
            </td>
          </ng-container>
          <!-- DNI Column -->
          <ng-container matColumnDef="recomendacion">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Recomendacion
            </th>
            <td mat-cell *matCellDef="let element">
              {{ element.recomendacion }}
            </td>
          </ng-container>
          <!-- Acciones Column -->
          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let element">
              <button
                mat-mini-fab
                color="primary"
                class="mr-2"
                matStepperNext
                (click)="selectTeletry(element)"
              >
                <mat-icon>description</mat-icon>
              </button>
              <button
                mat-mini-fab
                color="accent"
                (click)="showMedication(element)"
              >
                <mat-icon>description</mat-icon>
              </button>
            </td>
          </ng-container>

          <!-- <ng-container matColumnDef="loading">
            <th mat-footer-cell *matFooterCellDef colspan="6">
              Cargando datos...
            </th>
          </ng-container> -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <!-- <tr
            mat-footer-row
            *matFooterRowDef="['loading']"
            [ngClass]="{ hide: dataSource != null }"
          ></tr> -->
          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="5 ">No hay datos disponibles.</td>
          </tr>
        </table>
        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          [pageSize]="5"
        ></mat-paginator>
      </div>
    </mat-step>
    <mat-step label="Detalle de teletriaje">
      <form class="form" [formGroup]="form">
        <table class="w-100" cellspacing="0">
          <tr>
            <td style="padding-right: 8px">
              <mat-form-field class="w-100">
                <mat-label>Temperatura</mat-label>
                <input matInput readonly formControlName="temperatura" />
              </mat-form-field>
            </td>
            <td style="padding-right: 8px">
              <mat-form-field class="w-100">
                <mat-label>Glucosa</mat-label>
                <input matInput readonly formControlName="glucosa" />
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="w-100">
                <mat-label>Frecuencia arterial</mat-label>
                <input
                  matInput
                  readonly
                  formControlName="frecuencia_arterial"
                />
              </mat-form-field>
            </td>
          </tr>
          <tr>
            <td style="padding-right: 8px">
              <mat-form-field class="w-100">
                <mat-label>Frecuencia respiratoria</mat-label>
                <input
                  matInput
                  readonly
                  formControlName="frecuencia_respiratoria"
                />
              </mat-form-field>
            </td>
            <td style="padding-right: 8px">
              <mat-form-field class="w-100">
                <mat-label>Presion arterial diastólica</mat-label>
                <input
                  matInput
                  readonly
                  formControlName="presion_arterial_diastolica"
                />
              </mat-form-field>
            </td>
            <td>
              <mat-form-field class="w-100">
                <mat-label>Presion arterial sistolica</mat-label>
                <input
                  matInput
                  readonly
                  formControlName="presion_arterial_sistolica"
                />
              </mat-form-field>
            </td>
          </tr>
        </table>
        <label
          >En una escala del 1 al 10, donde 0 es ausencia de dolor y 10 el
          maximo dolor que se pueda percibir subjetivamente. ¿Cuanto califica su
          dolor?</label
        >
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="dolor" />
        </mat-form-field>
        <label>¿Tiene usted secreción o flujo por vagina?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="sangrado_vagina" />
        </mat-form-field>
        <label>¿Que color tiene?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="color_sangrado_vagina" />
        </mat-form-field>
        <label
          >¿Tiene usted secreción por la herida operatoria abdominal?</label
        >
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="sangrado_herida" />
        </mat-form-field>
        <label>¿Que color tiene?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="color_sangrado_herida" />
        </mat-form-field>
        <label
          >¿Nota usted alguna coloración alrededor de su herida operatoria
          abdominal?</label
        >
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="coloracion_herida" />
        </mat-form-field>
        <label>¿Que color tiene?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="color_coloracion_herida" />
        </mat-form-field>
        <label>Al momento de miccionar. ¿Tiene usted alguna molestia?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="molestia_miccion" />
        </mat-form-field>
        <label>¿Que molestia(s) presenta?</label>
        <div class="mt-2">
          <mat-form-field
            class="w-100"
            formArrayName="tipo_molestia_miccion"
            *ngFor="let med of molestiaField.controls; let i = index"
          >
            <mat-label>Molestia micción {{ i + 1 }}</mat-label>
            <input matInput readonly [formControlName]="i" />
          </mat-form-field>
        </div>
        <mat-form-field
          class="w-100"
          *ngIf="molestiaField.controls.length === 0"
        >
          <input matInput readonly value="No presenta ninguna molestia" />
        </mat-form-field>
        <label>¿Cuantas veces al dia defeca?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="veces_defeca_dia" />
        </mat-form-field>
        <label>¿Que textura tienen sus heces?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="textura_heces" />
        </mat-form-field>
        <label>¿Siente usted algun otro tipo de molestia?</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="otros" />
        </mat-form-field>
        <label>Estado</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="estado" />
        </mat-form-field>
        <label>Recomendacion</label>
        <mat-form-field class="w-100">
          <input matInput readonly formControlName="recomendacion" />
        </mat-form-field>
      </form>
    </mat-step>
    <mat-step label="Graficos estadisticos">
      <!-- <img src="assets/img/estadistica.jpg" alt="Image" class="mb-0" /> -->
      <div *ngIf="!loadingCharts">
        <!-- <div style="display: block">
          
        </div> -->
        <div class="row row-cols-3">
          <div class="col">
            <h3 class="text-center font-weight-bold">Temperatura</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataTemperatura"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Glucosa</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataGlucosa"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Frecuencia Arterial</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataFrecuenciaArterial"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Frecuencia Respiratoria</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataFrecuenciaRespiratoria"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Presion Arterial Sistolica</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataPresionArterialSistolica"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Presion arterial Diastolica</h3>
            <div style="display: block" class="mb-5">
              <canvas
                baseChart
                width="400"
                height="400"
                [datasets]="lineChartDataPresionArterialDiastolica"
                [labels]="lineChartLabels"
                [colors]="lineChartColors"
                [legend]="lineChartLegend"
                [chartType]="lineChartType"
              ></canvas>
            </div>
          </div>
        </div>
        <div class="row row-cols-2">
          <div class="col">
            <h3 class="text-center">Teletriajes por resultado</h3>
            <div style="display: block" class="">
              <canvas
                baseChart
                [data]="doughnutChartData"
                [labels]="doughnutChartLabels"
                [chartType]="doughnutChartType"
              >
              </canvas>
            </div>
          </div>
          <div class="col">
            <h3 class="text-center">Teletriajes por año y resultado</h3>
            <div style="display: block">
              <canvas
                baseChart
                [datasets]="barChartData"
                [labels]="barChartLabels"
                [options]="barChartOptions"
                [legend]="barChartLegend"
                [chartType]="barChartType"
              >
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </mat-step>
  </mat-horizontal-stepper>
</mat-dialog-content>
<mat-dialog-actions align="end" class="pt-0">
  <button mat-button mat-dialog-close color="primary">Cancelar</button>
</mat-dialog-actions>
